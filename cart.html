<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Cart - AutoGear Store</title>

  <script src="https://unpkg.com/feather-icons"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
    }

    /* NAVBAR */
    nav {
      background: #111;
      color: white;
      padding: 15px 10%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin-left: 20px;
    }

    nav a:hover { color: #ff6600; }

    /* PAGE WRAPPER */
    .container {
      padding: 40px 10%;
    }

    h1 {
      text-align: center;
      margin-bottom: 40px;
    }

    /* CART TABLE */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 40px;
    }

    th {
      background: #222;
      color: white;
      padding: 12px;
    }

    td {
      padding: 15px;
      background: white;
      border-bottom: 1px solid #ccc;
      text-align: center;
    }

    .qty-btn {
      background: #ff6600;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 1rem;
    }

    .qty-btn:hover {
      background: #e65c00;
    }

    .remove-btn {
      background: red;
      color: white;
      padding: 6px 12px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    /* CHECKOUT FORM */
    .checkout-box {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 600px;
      margin: auto;
    }

    .checkout-box h2 {
      margin-bottom: 20px;
      text-align: center;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    textarea {
      height: 100px;
    }

    .place-order {
      width: 100%;
      padding: 14px;
      background: #ff6600;
      color: white;
      border: none;
      font-size: 1.2rem;
      border-radius: 6px;
      cursor: pointer;
    }

    .place-order:hover {
      background: #e65c00;
    }

    .empty {
      text-align: center;
      font-size: 1.4rem;
      margin: 40px 0;
      color: #555;
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav>
    <h2>AutoGear Store</h2>
    <div>
      <a href="index.html"><i data-feather="home"></i> Home</a>
      <a href="cart.html"><i data-feather="shopping-cart"></i> Cart</a>
    </div>
  </nav>

  <div class="container">

    <h1>Your Cart</h1>

    <div id="cart-area"></div>

    <!-- CHECKOUT FORM -->
    <div class="checkout-box" id="checkout-box" style="display:none;">
      <h2>Checkout Details</h2>

      <input type="text" id="name" placeholder="Full Name" required>
      <input type="text" id="phone" placeholder="Phone Number" required>
      <textarea id="address" placeholder="Full Address" required></textarea>
      <input type="text" id="city" placeholder="City" required>
      <input type="text" id="zip" placeholder="ZIP / Postal Code" required>

      <button class="place-order" onclick="placeOrder()">Place Order</button>
    </div>

  </div>


  <script>
    feather.replace();

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function renderCart() {
      const cartArea = document.getElementById("cart-area");

      if (cart.length === 0) {
        cartArea.innerHTML = `<p class="empty">Your cart is empty.</p>`;
        document.getElementById("checkout-box").style.display = "none";
        return;
      }

      let html = `
        <table>
          <tr>
            <th>Item</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Total</th>
            <th>Action</th>
          </tr>
      `;

      let grandTotal = 0;

      cart.forEach((item, index) => {
        let total = item.price * item.qty;
        grandTotal += total;

        html += `
          <tr>
            <td>${item.name}</td>
            <td>$${item.price}</td>
            <td>
              <button class="qty-btn" onclick="changeQty(${index}, -1)">-</button>
              ${item.qty}
              <button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
            </td>
            <td>$${total}</td>
            <td><button class="remove-btn" onclick="removeItem(${index})">Remove</button></td>
          </tr>
        `;
      });

      html += `
        <tr>
          <td colspan="3"><strong>Grand Total</strong></td>
          <td colspan="2"><strong>$${grandTotal}</strong></td>
        </tr>
      </table>
      `;

      cartArea.innerHTML = html;

      document.getElementById("checkout-box").style.display = "block";
    }

    function changeQty(index, amount) {
      cart[index].qty += amount;
      if (cart[index].qty <= 0) cart[index].qty = 1;

      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    function placeOrder() {
      if (
        !document.getElementById("name").value ||
        !document.getElementById("phone").value ||
        !document.getElementById("address").value ||
        !document.getElementById("city").value ||
        !document.getElementById("zip").value
      ) {
        alert("Please fill all the details");
        return;
      }

      alert("Your order has been placed successfully!");

      localStorage.removeItem("cart");

      window.location.href = "index.html";
    }

    renderCart();
  </script>

</body>
</html>
